<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - CivicCare</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
</head>
<body class="bg-light">
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg civic-nav sticky-top">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <div class="civic-logo-icon me-2">
                    <i class="fas fa-home"></i>
                </div>
                <span class="fw-bold">CivicCare</span>
            </a>
        </div>
    </nav>

    <div class="container py-5">
        <div class="row justify-content-center">
            <div class="col-md-6 col-lg-5">
                <div class="civic-card p-4">
                    <div class="text-center mb-4">
                        <h1 class="h3 mb-2" id="form-title">Welcome Back</h1>
                        <p class="text-muted" id="form-subtitle">Sign in to your account</p>
                    </div>

                    <!-- Login Form -->
                    <form id="login-form">
                        <div class="mb-3" id="signup-fields" style="display: none;">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-control civic-input" name="fullName" required>
                        </div>

                        <div class="row mb-3" id="signup-age-dob" style="display: none;">
                            <div class="col-6">
                                <label class="form-label">Age</label>
                                <input type="number" class="form-control civic-input" name="age" min="18" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label">Date of Birth</label>
                                <input type="date" class="form-control civic-input" name="dateOfBirth" required>
                            </div>
                        </div>

                        <div class="mb-3" id="signup-aadhaar-upload" style="display: none;">
                            <label class="form-label">Aadhaar Upload</label>
                            <div class="position-relative">
                                <input type="file" class="form-control civic-input" name="aadhaarFile" accept=".pdf,.jpg,.jpeg,.png" required>
                                <i class="fas fa-upload position-absolute top-50 end-0 translate-middle-y me-3"></i>
                            </div>
                        </div>

                        <div class="mb-3" id="signup-phone" style="display: none;">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-control civic-input" name="phone" placeholder="10-digit phone number" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label" id="identifier-label">Aadhaar Number / Email</label>
                            <input type="text" class="form-control civic-input" name="identifier" placeholder="Enter Aadhaar number or email" required>
                        </div>

                        <div class="mb-3" id="signup-email" style="display: none;">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control civic-input" name="email" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Password</label>
                            <div class="position-relative">
                                <input type="password" class="form-control civic-input" name="password" id="password-input" required>
                                <button type="button" class="btn btn-link position-absolute top-50 end-0 translate-middle-y me-2" id="toggle-password">
                                    <i class="fas fa-eye" id="password-icon"></i>
                                </button>
                            </div>
                            <div class="form-text" id="password-note" style="display: none;">
                                <i class="fas fa-lock me-1"></i> Password will be encrypted for security
                            </div>
                        </div>

                        <button type="submit" class="btn civic-button-primary w-100 mb-3" id="submit-btn">Sign In</button>
                    </form>

                    <div class="text-center">
                        <button class="btn btn-link" id="toggle-form">Don't have an account? Sign up</button>
                    </div>

                    <div class="text-center mt-3" id="forgot-password">
                        <a href="#" class="text-muted small">Forgot your password?</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="script.js"></script>
    
    <script>
        // Toggle between login and signup forms
        let isLogin = true;
        
        document.getElementById('toggle-form').addEventListener('click', function() {
            isLogin = !isLogin;
            
            const formTitle = document.getElementById('form-title');
            const formSubtitle = document.getElementById('form-subtitle');
            const submitBtn = document.getElementById('submit-btn');
            const toggleBtn = document.getElementById('toggle-form');
            const identifierLabel = document.getElementById('identifier-label');
            const passwordNote = document.getElementById('password-note');
            const forgotPassword = document.getElementById('forgot-password');
            
            // Signup-only fields
            const signupFields = document.getElementById('signup-fields');
            const signupAgeDob = document.getElementById('signup-age-dob');
            const signupAadhaarUpload = document.getElementById('signup-aadhaar-upload');
            const signupPhone = document.getElementById('signup-phone');
            const signupEmail = document.getElementById('signup-email');
            
            if (isLogin) {
                // Switch to login
                formTitle.textContent = 'Welcome Back';
                formSubtitle.textContent = 'Sign in to your account';
                submitBtn.textContent = 'Sign In';
                toggleBtn.textContent = "Don't have an account? Sign up";
                identifierLabel.textContent = 'Aadhaar Number / Email';
                passwordNote.style.display = 'none';
                forgotPassword.style.display = 'block';
                
                // Hide signup fields
                signupFields.style.display = 'none';
                signupAgeDob.style.display = 'none';
                signupAadhaarUpload.style.display = 'none';
                signupPhone.style.display = 'none';
                signupEmail.style.display = 'none';
            } else {
                // Switch to signup
                formTitle.textContent = 'Join CivicCare';
                formSubtitle.textContent = 'Create your account to get started';
                submitBtn.textContent = 'Create Account';
                toggleBtn.textContent = 'Already have an account? Sign in';
                identifierLabel.textContent = 'Aadhaar Number';
                passwordNote.style.display = 'block';
                forgotPassword.style.display = 'none';
                
                // Show signup fields
                signupFields.style.display = 'block';
                signupAgeDob.style.display = 'block';
                signupAadhaarUpload.style.display = 'block';
                signupPhone.style.display = 'block';
                signupEmail.style.display = 'block';
            }
        });
        
        // Toggle password visibility
        document.getElementById('toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password-input');
            const passwordIcon = document.getElementById('password-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                passwordIcon.classList.remove('fa-eye');
                passwordIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                passwordIcon.classList.remove('fa-eye-slash');
                passwordIcon.classList.add('fa-eye');
            }
        });
        
        // Handle form submission
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const password = formData.get('password');
            
            if (isLogin) {
                // Login logic
                console.log('Login attempted with:', {
                    identifier: formData.get('identifier'),
                    password: encryptPassword(password)
                });
                alert('Login functionality would be implemented here.');
            } else {
                // Signup logic - validate fields
                const email = formData.get('email');
                const phone = formData.get('phone');
                const aadhaar = formData.get('identifier');
                
                if (!validateEmail(email)) {
                    alert('Please enter a valid email address');
                    return;
                }
                
                if (!validatePassword(password)) {
                    alert('Password must be at least 6 characters long');
                    return;
                }
                
                if (!validateAadhaar(aadhaar)) {
                    alert('Please enter a valid 12-digit Aadhaar number');
                    return;
                }
                
                if (!validatePhone(phone)) {
                    alert('Please enter a valid 10-digit phone number');
                    return;
                }
                
                console.log('Signup attempted with:', {
                    fullName: formData.get('fullName'),
                    age: formData.get('age'),
                    dateOfBirth: formData.get('dateOfBirth'),
                    aadhaar: aadhaar,
                    email: email,
                    phone: phone,
                    password: encryptPassword(password)
                });
                alert('Account created successfully! You can now login.');
            }
        });
    </script>
</body>
</html>